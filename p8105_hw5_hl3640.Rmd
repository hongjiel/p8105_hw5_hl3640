---
title: "Homework 5"
author: "Hongjie Liu"
output: github_document
---


Load necessary packages for homework 5.

```{r loadpackages, message = FALSE}
library(tidyverse)
```


## Problem 1

Load and tidy dataset.

```{r p1_loadtidy, message = FALSE}
arm_df = list.files(path = "./data/", pattern = "^[ce]", full.names = T) %>% 
  map(~ read_csv(.x) %>% 
        mutate(arm = .x)) %>% 
  bind_rows %>% 
  pivot_longer(
    cols = week_1:week_8,
    names_to = "week",
    names_prefix = "week_",
    values_to = "observation"
  ) %>% 
  mutate(
    week = as.numeric(week),
    arm = str_extract(arm, "[a-z]{3}_[0-9]{2}")
  ) %>% 
  separate(arm, into = c("arm", "subject_id"), sep = "_") %>% 
  filter(arm == "con")
```
