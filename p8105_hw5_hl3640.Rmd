---
title: "Homework 5"
author: "Hongjie Liu"
output: github_document
---


Load necessary packages for homework 5.

```{r loadpackages, message = FALSE}
library(tidyverse)
```


## Problem 1

Load and tidy dataset.

```{r p1_loadtidy, message = FALSE}
arm_df = list.files(path = "./data/", pattern = "^[ce]", full.names = T) %>% 
  map(~ read_csv(.x) %>% 
        mutate(arm = .x)) %>% 
  bind_rows %>% 
  pivot_longer(
    cols = week_1:week_8,
    names_to = "week",
    names_prefix = "week_",
    values_to = "observation"
  ) %>% 
  mutate(
    week = as.numeric(week),
    arm = str_extract(arm, "[a-z]{3}_[0-9]{2}")
  ) %>% 
  separate(arm, into = c("arm", "subject_id"), sep = "_") %>% 
  filter(arm == "con")
```

Make a spaghetti plot showing observations on each subject over time, and comment on differences between groups.

```{r p1_plot}
arm_df %>% 
  ggplot(aes(x = week, y = observation, color = subject_id)) +
  geom_line() +
  geom_point() +
  labs(
    title = "Observations on each subject over time",
    x = "Week",
    y = "Observation"
  )
```


## Problem 2

The data includes information of more than 52,000 criminal homicides over the past decade in 50 of the largest American cities. The raw data includes:

* uid;
* reported date;
* basic demographic information about each victim, including first name, last name, race, age, and sex;
* the location of the killing, including state, city, longitude, and latitude;
* whether an arrest was made.
